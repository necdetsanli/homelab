apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  # sync-wave -2: namespaces first
  - ../namespaces
  # sync-wave -1: projects + network-policies before apps
  - ../projects
  - ../network-policies
  # sync-wave 0: ArgoCD config
  - ../config
  # sync-wave 1: platform Applications (includes metallb-config app at sync-wave 2)
  - ../applications
  # Phase 3: add ingress-nginx to applications/kustomization.yaml
  # Phase 4: add istio to applications/kustomization.yaml